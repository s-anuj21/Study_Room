{"mappings":"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","sources":["public/js/main.js","public/js/view/baseView.js","public/js/controller/authenticate.js","public/js/controller/grpController.js","public/js/view/chatView.js"],"sourcesContent":["// import axios from 'axios';\r\n\r\n// Solve the issue of importing, but wanna use fetch here\r\n\r\nimport * as baseView from './view/baseView.js';\r\nimport * as authenticate from './controller/authenticate.js';\r\nimport * as grpController from './controller/grpController.js';\r\nimport * as chatView from './view/chatView.js';\r\n\r\n// ## When Login Form is submitted\r\nif (baseView.DOMElements.formLogin) {\r\n  baseView.DOMElements.formLogin.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    if (baseView.validateInputs()) {\r\n      authenticate.login(\r\n        baseView.DOMElements.email.value,\r\n        baseView.DOMElements.password.value\r\n      );\r\n    }\r\n  });\r\n}\r\n/* ###### */\r\n\r\n// ## When SignUp Form is submitted\r\nif (baseView.DOMElements.formSignup) {\r\n  baseView.DOMElements.formSignup.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    if (baseView.validateInputs()) {\r\n      authenticate.signup(\r\n        baseView.DOMElements.name.value,\r\n        baseView.DOMElements.email.value,\r\n        baseView.DOMElements.password.value\r\n      );\r\n    }\r\n  });\r\n}\r\n/* ###### */\r\n\r\n// ## When Grp Creation Form is submitted\r\nif (baseView.DOMElements.formGrpCreation) {\r\n  baseView.DOMElements.formGrpCreation.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    if (baseView.validateInputs()) {\r\n      grpController.createGroup(\r\n        baseView.DOMElements.grpName.value,\r\n        baseView.DOMElements.grpSubject.value,\r\n        baseView.DOMElements.dateEnd.value\r\n      );\r\n    }\r\n  });\r\n}\r\n/* ###### */\r\n\r\nif (baseView.DOMElements.filesToUpload) {\r\n  baseView.DOMElements.uploadBtn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    // if (baseView.validateInputs()) {\r\n    grpController.uploadFiles(baseView.DOMElements.filesToUpload);\r\n    // }\r\n  });\r\n}\r\n\r\n// Handling the Change file click\r\nif (baseView.DOMElements.filesToUpload) {\r\n  baseView.DOMElements.filesToUpload.addEventListener('change', function (e) {\r\n    e.preventDefault();\r\n\r\n    baseView.DOMElements.filesDesc.textContent =\r\n      this.files.length + ` file chosen`;\r\n  });\r\n}\r\n\r\n// Handling Click of Logout Button\r\nif (baseView.DOMElements.logoutBtn) {\r\n  baseView.DOMElements.logoutBtn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    authenticate.logout();\r\n  });\r\n}\r\n/* ###### */\r\n\r\n// Handling Submit of Invite Form\r\nif (baseView.DOMElements.formInvite) {\r\n  baseView.DOMElements.formInvite.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    grpController.sendGroupJoinLink(\r\n      baseView.DOMElements.grpDetails.dataset.grpid,\r\n      baseView.DOMElements.email.value\r\n    );\r\n  });\r\n}\r\n/* ###### */\r\n\r\n// Handling Submit of Join Group Form\r\nif (baseView.DOMElements.formJoinGrp) {\r\n  baseView.DOMElements.formJoinGrp.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    grpController.joinGroup(baseView.DOMElements.grpJoinCodeInput.value);\r\n  });\r\n}\r\n/* ###### */\r\n\r\n// Handling Click of Generate Code Button\r\nif (baseView.DOMElements.btnGenerateCode) {\r\n  baseView.DOMElements.btnGenerateCode.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    grpController.generateJoinCode(\r\n      baseView.DOMElements.grpDetails.dataset.grpid\r\n    );\r\n  });\r\n}\r\n/* ###### */\r\n\r\n// Handling Click of Delete Group Button\r\nif (baseView.DOMElements.grpDeleteBtn) {\r\n  baseView.DOMElements.grpDeleteBtn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    baseView.DOMElements.modalConfirmation.classList.add('modal--showTop');\r\n  });\r\n}\r\n\r\nif (baseView.DOMElements.modalConfirmation) {\r\n  baseView.DOMElements.modalConfirmation.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    grpController.handleClickConfirmationModal(e);\r\n  });\r\n}\r\n\r\n// Handling Click of Ok Button of alert Modal\r\nif (baseView.DOMElements.modalOkBtn) {\r\n  baseView.DOMElements.modalOkBtn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    document.querySelector('.modalAlert').classList.remove('showAlert');\r\n  });\r\n}\r\n\r\n// HANDLING CLICK ON MEMBER BUTTON\r\nif (baseView.DOMElements.memberBtnToggle) {\r\n  baseView.DOMElements.memberBtnToggle.addEventListener('click', () => {\r\n    console.log('..');\r\n    baseView.DOMElements.membersSection.classList.toggle(\r\n      'grpDetails__members--show'\r\n    );\r\n    if (baseView.DOMElements.memberBtnToggle.name == 'close') {\r\n      baseView.DOMElements.memberBtnToggle.name = 'people';\r\n    } else {\r\n      baseView.DOMElements.memberBtnToggle.name = 'close';\r\n    }\r\n  });\r\n}\r\n\r\n// Adding Join Input Code\r\n// /groups/${req.params.grpId}/joinGroup/${joinToken}\r\n\r\n// Handling chat input submission\r\nif (baseView.DOMElements.chatRoomForm) {\r\n  baseView.DOMElements.chatRoomForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    if (baseView.DOMElements.chatRoomInput.value) {\r\n      chatView.handleChatInput(baseView.DOMElements.chatRoomInput.value);\r\n    }\r\n  });\r\n}\r\n\r\n// end\r\n\r\n// Making tabs work\r\nconst handleTabSwich = (btn, el, otherBtn, otherEl) => {\r\n  el.style.display = 'block';\r\n  btn.style.backgroundColor = '#e67e22';\r\n  otherEl.style.display = 'none';\r\n  otherBtn.style.backgroundColor = '#fff';\r\n};\r\n\r\nif (baseView.DOMElements.grpDetails) {\r\n  baseView.DOMElements.chatRoomBtnTab.addEventListener('click', () => {\r\n    handleTabSwich(\r\n      baseView.DOMElements.chatRoomBtnTab,\r\n      baseView.DOMElements.chatRoom,\r\n      baseView.DOMElements.materialBtnTab,\r\n      baseView.DOMElements.grpMaterials\r\n    );\r\n\r\n    baseView.DOMElements.chatRoomContainer.scrollTop =\r\n      baseView.DOMElements.chatRoomContainer.scrollHeight;\r\n  });\r\n\r\n  baseView.DOMElements.materialBtnTab.addEventListener('click', () => {\r\n    handleTabSwich(\r\n      baseView.DOMElements.materialBtnTab,\r\n      baseView.DOMElements.grpMaterials,\r\n      baseView.DOMElements.chatRoomBtnTab,\r\n      baseView.DOMElements.chatRoom\r\n    );\r\n\r\n    baseView.DOMElements.grpMaterials.scrollTop =\r\n      baseView.DOMElements.grpMaterials.scrollHeight;\r\n  });\r\n}\r\n","export const DOMElements = {\r\n  formLogin: document.querySelector('.form--login'),\r\n  formSignup: document.querySelector('.form--signup'),\r\n  btnSubmit: document.querySelector('.form__field__btn--submit'),\r\n  formGrpCreation: document.querySelector('.form--grpCreation'),\r\n  formInvite: document.querySelector('.header__form--invite'),\r\n  formJoinGrp: document.querySelector('.header__form--joinGrp'),\r\n  name: document.querySelector('.name'),\r\n  email: document.querySelector('.email'),\r\n  password: document.querySelector('.password'),\r\n  grpName: document.querySelector('.grpName'),\r\n  grpJoinCodeInput: document.querySelector('.input--joinCode'),\r\n  grpSubject: document.querySelector('.grpSubject'),\r\n  btnGrpJoin: document.querySelector('.btn--grpJoin'),\r\n  grpDetails: document.querySelector('.grpDetails'),\r\n  grpMaterials: document.querySelector('.grpDetails__materials'),\r\n  btnDownloadMaterial: document.querySelector(\r\n    '.grpDetails__materials__list__item__btnDownload'\r\n  ),\r\n  dateToday: document.querySelector('.dateToday'),\r\n  dateEnd: document.querySelector('.dateEnd'),\r\n  filesToUpload: document.querySelector('.input--file'),\r\n  filesDesc: document.querySelector('.inputFile__text'),\r\n  logoutBtn: document.querySelector('.nav__list__item__logout'),\r\n  uploadBtn: document.querySelector('.grpDetails__footer__btn--upload'),\r\n  memberBtnToggle: document.querySelector('.memberBtn--toggle'),\r\n  membersSection: document.querySelector('.grpDetails__members'),\r\n  // copyJoinLinkBtn: document.querySelector('.btn--linkCopy'),\r\n  btnGenerateCode: document.querySelector('.btn--joinCodeGenerate'),\r\n  joinCodeContent: document.querySelector('.grpDetails__header__joinCode'),\r\n  grpDeleteBtn: document.querySelector('.btn--deleteGrp'),\r\n  modalOkBtn: document.querySelector('.modalAlert__btn--ok'),\r\n  passwordConfirm: document.querySelector('.password--confirm'),\r\n  inputCommonArr: Array.from(document.querySelectorAll('.form__field__input')),\r\n  modalConfirmation: document.querySelector('.modal-confirmation'),\r\n\r\n  // chatRoom\r\n  chatRoom: document.querySelector('.chatRoom'),\r\n  chatRoomContainer: document.querySelector('.chatRoom__container'),\r\n  chatRoomMsgsList: document.querySelector('.chatRoom__messages__list'),\r\n  chatRoomTyping: document.querySelector('.chatRoom__messages__typingText'),\r\n  chatRoomForm: document.querySelector('.chatRoom__form'),\r\n  chatRoomInput: document.querySelector('.chatRoom__form__input'),\r\n  materialBtnTab: document.querySelector(\r\n    '.grpDetails__contents__tabs__btns--material'\r\n  ),\r\n  chatRoomBtnTab: document.querySelector(\r\n    '.grpDetails__contents__tabs__btns--chatRoom'\r\n  ),\r\n};\r\n\r\n// Validations\r\nconst formInputErrorNotice = (el = '', msg = '') => {\r\n  // Removing the error of particular input\r\n  if (el && el.parentElement.querySelector('.formInput__error')) {\r\n    console.log('dsf');\r\n    el.parentElement\r\n      .querySelector('.formInput__error')\r\n      .parentElement.removeChild(\r\n        el.parentElement.querySelector('.formInput__error')\r\n      );\r\n  }\r\n\r\n  // If the function is not getting the msg, that means the notice should only be removed\r\n  if (msg === '') return;\r\n\r\n  const markUp = `\r\n         <div class = 'color--error formInput__error'>${msg}</div>\r\n    `;\r\n  el.insertAdjacentHTML('afterend', markUp);\r\n};\r\n\r\n// Basic validation of input fields\r\nexport const validateInputs = () => {\r\n  for (let i = 0; i < DOMElements.inputCommonArr.length; i++) {\r\n    if (DOMElements.inputCommonArr[i].value.length < 1) {\r\n      formInputErrorNotice(\r\n        DOMElements.inputCommonArr[i],\r\n        'This field is mondatory'\r\n      );\r\n      return false;\r\n    } else {\r\n      formInputErrorNotice(DOMElements.password);\r\n    }\r\n  }\r\n\r\n  if (DOMElements.passwordConfirm) {\r\n    if (DOMElements.passwordConfirm.value.length < 6) {\r\n      formInputErrorNotice(\r\n        DOMElements.passwordConfirm,\r\n        'Enter Password of min 6 character!'\r\n      );\r\n      return false;\r\n    } else {\r\n      formInputErrorNotice(DOMElements.passwordConfirm);\r\n    }\r\n  }\r\n\r\n  if (DOMElements.password && DOMElements.passwordConfirm) {\r\n    if (DOMElements.password.value.length < 6) {\r\n      formInputErrorNotice(\r\n        DOMElements.password,\r\n        'Enter Password of min 6 character!'\r\n      );\r\n      return false;\r\n    } else {\r\n      formInputErrorNotice(DOMElements.password);\r\n    }\r\n\r\n    if (DOMElements.password.value != DOMElements.passwordConfirm.value) {\r\n      formInputErrorNotice(\r\n        DOMElements.passwordConfirm,\r\n        `Password and Confirm Password doesn't match`\r\n      );\r\n      return false;\r\n    } else {\r\n      formInputErrorNotice(DOMElements.passwordConfirm);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nif (DOMElements.dateToday) {\r\n  let today = new Date();\r\n  let dd = String(today.getDate());\r\n  let mm = String(today.getMonth() + 1); //January is 0!\r\n  let yyyy = today.getFullYear();\r\n\r\n  if (dd < 10) dd = '0' + dd;\r\n  if (mm < 10) mm = '0' + mm;\r\n\r\n  today = yyyy + '-' + mm + '-' + dd;\r\n  DOMElements.dateToday.value = today;\r\n  DOMElements.dateEnd.setAttribute('min', today);\r\n}\r\n\r\n// CUSTOM ALERT\r\nexport const customAlert = (msg) => {\r\n  document.querySelector('.modalAlert').classList.add('showAlert');\r\n  document.querySelector('.modalAlert__para').textContent = msg;\r\n};\r\n","import * as baseView from '../view/baseView.js';\r\n\r\n/*------ WHEN LOGIN ROUTE HITS -----*/\r\nexport const login = async (email, password, st = '') => {\r\n  email = email.trim();\r\n  password = password.trim();\r\n  // Saving the url, to which want to redirect after login\r\n  const prevUrl = window.location;\r\n  const data = {\r\n    email,\r\n    password,\r\n  };\r\n  try {\r\n    const url = `/api/users/login`;\r\n    baseView.DOMElements.btnSubmit.disabled = true;\r\n    let res = await fetch(url, {\r\n      method: 'POST',\r\n\r\n      // It tells u about the type of file it is sending\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data), // body data type must match \"Content-Type\" header\r\n    });\r\n\r\n    res = await res.json();\r\n    baseView.DOMElements.btnSubmit.disabled = false;\r\n\r\n    if (res.status == 'success' && prevUrl.pathname != '/login') {\r\n      window.location.assign(prevUrl);\r\n\r\n\r\n    }\r\n    else if (res.status != 'success') {\r\n      // Alert Failed\r\n      let msg = res.message;\r\n      if (!msg) msg = 'Wrong Email or Password!!';\r\n      baseView.customAlert(msg);\r\n    } else window.location.assign('/');\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n/*  ############## */\r\n\r\n/*------ WHEN SIGNUP ROUTE IS HITTED -----*/\r\nexport const signup = async (name, email, password, st = '') => {\r\n  name = name.trim();\r\n  email = email.trim();\r\n  password = password.trim();\r\n\r\n  const prevUrl = window.location;\r\n\r\n  const data = {\r\n    name,\r\n    email,\r\n    password,\r\n  };\r\n\r\n  try {\r\n    const url = `/api/users/signup`;\r\n\r\n    baseView.DOMElements.btnSubmit.disabled = true;\r\n\r\n    let res = await fetch(url, {\r\n      method: 'POST',\r\n      // credentials: 'same-origin', // This is to send cookies\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n\r\n      body: JSON.stringify(data),\r\n    });\r\n\r\n    res = await res.json();\r\n\r\n    baseView.DOMElements.btnSubmit.disabled = false;\r\n\r\n    if (res.status == 'success' && prevUrl.pathname != '/signup')\r\n      window.location.assign(prevUrl);\r\n    else if (res.status != 'success') {\r\n      //Alert Failed\r\n      let msg = res.message;\r\n      if (!msg) msg = 'Something went wrong!!';\r\n      baseView.customAlert(msg);\r\n    } else window.location.assign('/');\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n/*  ############## */\r\n\r\n/*------ CALLED WHEN LOGOUT ROUTE HITS -----*/\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: `/api/users/logout`,\r\n    });\r\n\r\n    if (res) location.reload();\r\n    // utilities.renderAlertSecondary('Logged out successfully', false, '/');\r\n  } catch (err) {\r\n    // utilities.renderAlertSecondary(err.response.data.message);\r\n  }\r\n};\r\n/*  ############## */\r\n","import * as baseView from '../view/baseView.js';\r\n\r\n/*------ WHEN SIGNUP ROUTE IS HIT -----*/\r\nexport const createGroup = async (name, subject, endDate, st = '') => {\r\n  name = name.trim();\r\n  subject = subject.trim();\r\n  endDate = endDate.trim();\r\n\r\n  const data = {\r\n    name,\r\n    subject,\r\n    endDate,\r\n  };\r\n\r\n  try {\r\n    const url = `/api/groups`;\r\n\r\n    // baseView.DOMElements.btnSubmit.disabled = true;\r\n    let res = await fetch(url, {\r\n      method: 'POST',\r\n      // credentials: 'same-origin', // This is to send cookies\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n\r\n      body: JSON.stringify(data),\r\n    });\r\n\r\n    res = await res.json();\r\n\r\n    // baseView.DOMElements.btnSubmit.disabled = false;\r\n\r\n    if (res.status == 'success') window.location.assign('/');\r\n    else {\r\n      // Alert Failed\r\n      let msg = res.message;\r\n      if (!msg) msg = 'Something went wrong!!';\r\n      baseView.customAlert(msg);\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n/*  ############## */\r\n\r\n// upload\r\n\r\nexport const uploadFiles = async (data, description) => {\r\n  if (data.files.length < 1) {\r\n    baseView.customAlert('Please select some files.');\r\n    return;\r\n  }\r\n  const formData = new FormData();\r\n\r\n  for (let i = 0; i < data.files.length; i++) {\r\n    formData.append('files', data.files[i]);\r\n  }\r\n\r\n  const filesDescription = '';\r\n  formData.append('description', filesDescription);\r\n\r\n  const url = `/api/studyItems/${baseView.DOMElements.grpDetails.dataset.grpid}`;\r\n\r\n  // baseView.DOMElements.btnSubmit.disabled = true;\r\n  try {\r\n    let res = await fetch(url, {\r\n      method: 'POST',\r\n      body: formData,\r\n      // headers: {\r\n      //   'Content-Type': 'multipart/form-data',\r\n      // },\r\n    });\r\n\r\n    // baseView.DOMElements.btnSubmit.disabled = false;\r\n\r\n    if (res) location.reload();\r\n    else {\r\n      let msg = res.message;\r\n      if (!msg) msg = 'Something went wrong!!';\r\n      baseView.customAlert(msg);\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\n// sendGroupJoinLink\r\nexport const sendGroupJoinLink = async (groupId, emailId) => {\r\n  try {\r\n    const url = `/api/groups/${groupId}/sendInvite`;\r\n\r\n    let res = await fetch(url, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ emailId }),\r\n    });\r\n\r\n    res = await res.json();\r\n    console.log(res);\r\n\r\n    if (res.status != 'success') {\r\n      let msg = res.message;\r\n      if (!msg) msg = 'Something went wrong!!';\r\n      baseView.customAlert(msg);\r\n      return;\r\n    }\r\n\r\n    if (res.status == 'success') {\r\n      baseView.customAlert(\r\n        'Invite Sent!! Ask your friend to check their spam folder too.'\r\n      );\r\n      baseView.DOMElements.formInvite.reset();\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n// ###################\r\n\r\nexport const generateJoinCode = async (grpId) => {\r\n  try {\r\n    const url = `/api/groups/${grpId}/generateJoinCode`;\r\n\r\n    let res = await fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    res = await res.json();\r\n\r\n    if (res.status != 'success') {\r\n      let msg = res.message;\r\n      if (!msg) msg = 'Something went wrong!!';\r\n      baseView.customAlert(msg);\r\n      return;\r\n    }\r\n    baseView.DOMElements.joinCodeContent.innerHTML = res.joinTokenWithGrp;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const joinGroup = async (joinTokenWithGrp) => {\r\n  try {\r\n    const [grpId, joinToken] = joinTokenWithGrp.trim().split('=');\r\n\r\n    const url = `/api/groups/joinByCode`;\r\n    let res = await fetch(url, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ grpId, joinToken }),\r\n    });\r\n\r\n    res = await res.json();\r\n\r\n    if (res.status != 'success') {\r\n      let msg = res.message;\r\n      if (!msg) msg = 'Something went wrong!!';\r\n      baseView.customAlert(msg);\r\n    }\r\n\r\n    window.location.assign(`/group/${grpId}`);\r\n  } catch (err) {\r\n    console.log(err.message);\r\n  }\r\n};\r\n\r\n// Stuff Related to Group Deletion\r\n\r\n// HANDLING CLICK ON CONFIRMATION MODAL\r\nexport const handleClickConfirmationModal = async (e) => {\r\n  if (!e.target.matches('.modal-confirmation__btns__btn')) return;\r\n  // CLOSE THE MODAL\r\n  baseView.DOMElements.modalConfirmation.classList.remove('modal--showTop');\r\n\r\n  // IF CLICK ON YES, DELETE THE COMMENT\r\n  if (e.target.matches('.modal-confirmation__btns__btn--yes')) {\r\n    deleteGroup(baseView.DOMElements.grpDetails.dataset.grpid);\r\n  }\r\n};\r\n\r\nconst deleteGroup = async (groupId) => {\r\n  try {\r\n    const url = `/api/groups/${groupId}`;\r\n\r\n    let res = await fetch(url, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    res = await res.json();\r\n\r\n    if (res.status != 'success') {\r\n      let msg = res.message;\r\n      if (!msg) msg = 'Something went wrong!!';\r\n      baseView.customAlert(msg);\r\n      return;\r\n    }\r\n\r\n    window.location.assign('/');\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n// End of Stuff Related to Group Deletion\r\n// ###################\r\n","import * as baseView from './baseView.js';\r\n\r\nconst socket = io();\r\n\r\nconst formatTime = (dateStr) => {\r\n  const msgDate = new Date(dateStr);\r\n  let hours = msgDate.getHours();\r\n  let minutes = msgDate.getMinutes();\r\n\r\n  let period = 'AM';\r\n  if (hours > 12) {\r\n    hours = hours % 12;\r\n    period = 'PM';\r\n  }\r\n\r\n  if (hours < 10) hours = '0' + hours;\r\n  if (minutes < 10) minutes = '0' + minutes;\r\n\r\n  const time = `${hours}:${minutes} ${period}`;\r\n  return time;\r\n};\r\n\r\n// ChatRoom\r\nconst addMessage = (msg, user, pos) => {\r\n  const itemMarkup = `\r\n        <li class = \"chatRoom__messages__list__item  chatRoom__messages__list__item--${pos}\">\r\n          <div class = \"chatRoom__messages__list__item__info\">\r\n            <span class = \"chatRoom__messages__list__item__info__user\">${user}</span>\r\n            <p class = \"chatRoom__messages__list__item__info__msg\">${msg}</p>\r\n            <span class = \"chatRoom__messages__list__item__info__time\">${formatTime(\r\n              Date.now()\r\n            )}</span>\r\n          </div\r\n        </li>\r\n    `;\r\n\r\n  baseView.DOMElements.chatRoomMsgsList.insertAdjacentHTML(\r\n    'beforeend',\r\n    itemMarkup\r\n  );\r\n\r\n  baseView.DOMElements.chatRoomContainer.scrollTop =\r\n    baseView.DOMElements.chatRoomContainer.scrollHeight;\r\n};\r\n// end of addmessage function\r\n\r\n// Emiting typing\r\nif (baseView.DOMElements.chatRoom) {\r\n  baseView.DOMElements.chatRoomInput.addEventListener('keyup', (e) => {\r\n    const data = {\r\n      user: baseView.DOMElements.chatRoomForm.dataset.username,\r\n      groupId: baseView.DOMElements.grpDetails.dataset.grpid,\r\n      userId: baseView.DOMElements.grpDetails.dataset.userid,\r\n    };\r\n\r\n    if (e.keyCode != 13) {\r\n      socket.emit('is-typing', data);\r\n    }\r\n  });\r\n}\r\n\r\n//end\r\n\r\n// Emiting if a user joined the chat\r\nif (baseView.DOMElements.chatRoomForm) {\r\n  const data = {\r\n    user: baseView.DOMElements.chatRoomForm.dataset.username,\r\n    groupId: baseView.DOMElements.grpDetails.dataset.grpid,\r\n    userId: baseView.DOMElements.grpDetails.dataset.userid,\r\n  };\r\n  socket.emit('new_user_joined', data);\r\n}\r\n\r\n// Listening for a message receive and will add the msg to UI\r\nsocket.on('msg-receive', (data) => {\r\n  baseView.DOMElements.chatRoomTyping.textContent = '';\r\n  addMessage(data.msg, data.user, 'left');\r\n  // window.scrollTo(0, document.body.scrollHeight);\r\n});\r\n\r\nsocket.on('user-joined', (data) => {\r\n  // Don't do anything for now\r\n  /*\r\n  const itemMarkup = `\r\n      <li class = \"chatRoom__messages__d\">\r\n        <p>${name}<span> joined the chat.</span></p>\r\n      </li>\r\n    `;\r\n  baseView.DOMElements.chatRoomMsgsList.insertAdjacentHTML(\r\n    'beforeend',\r\n    itemMarkup\r\n  );\r\n  */\r\n});\r\n\r\n// Listening for typing event\r\nlet intervalIdTyping;\r\nsocket.on('is-typing', (data) => {\r\n  baseView.DOMElements.chatRoomTyping.textContent = `${\r\n    data.user.split(' ')[0]\r\n  } is typing...`;\r\n\r\n  clearInterval(intervalIdTyping);\r\n\r\n  intervalIdTyping = setInterval(() => {\r\n    baseView.DOMElements.chatRoomTyping.textContent = '';\r\n  }, 1500);\r\n});\r\n\r\n// Handling the Send Message of User\r\nexport const handleChatInput = async (inputMsg) => {\r\n  addMessage(inputMsg, 'You', 'right');\r\n  const data = {\r\n    msg: inputMsg,\r\n    groupId: baseView.DOMElements.grpDetails.dataset.grpid,\r\n    user: baseView.DOMElements.chatRoomForm.dataset.username,\r\n  };\r\n\r\n  socket.emit('msg-send', data);\r\n  baseView.DOMElements.chatRoomInput.value = '';\r\n\r\n  const url = `/api/groups/${baseView.DOMElements.grpDetails.dataset.grpid}/chatRoom/${baseView.DOMElements.grpDetails.dataset.userid}`;\r\n\r\n  try {\r\n    let res = await fetch(url, {\r\n      method: 'POST',\r\n      // credentials: 'same-origin', // This is to send cookies\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ inputMsg }),\r\n    });\r\n\r\n    res = await res.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n\r\n  // saving data\r\n};\r\n"],"names":[],"version":3,"file":"bundle.js.map"}